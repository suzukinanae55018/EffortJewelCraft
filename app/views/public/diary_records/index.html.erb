
<%= render 'public/searches/search' %>
<div class="container mt-3">
  <div class="row">
    <div class="col-sm-12 mx-auto">
      <h3>投稿一覧</h3>
      <!--タグ検索-->
      <% if user_signed_in? %>
        <%= form_with url: diary_records_path, method: :get, html: {class: "form-inline my-2 mt-lg-0 ml-auto"} do |f| %>
        <%= f.text_field :category, class: "form-control mr-sm-2", placeholder: "タグ検索" %>
        <%= f.submit "検索", class: "btn btn-outline-primary my-2 my-sm-0" %>
        <% end %>
      <% end %>
      <div class="row mt-3">
         <%= render "index", diary_records: @diary_records %>
      </div>
      <%= paginate @diary_records, theme: 'bootstrap-5' %>
    </div>
  </div>
</div>
<!--投稿内容は124文字以上は…表記-->
<script>
  $(document).ready(function() {
  $('.truncate-text').each(function() {
    const textContent = $(this).text().trim();
    if (textContent.length > 124) {
      $(this).text(textContent.slice(0, 124) + '...');
    }
  });
});
</script>